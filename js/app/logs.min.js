let dataSet=null;function getLogs(){$.ajax({url:"https://dashboard.8thsensus.com:8080/message",headers:{"Content-Type":"application/x-www-form-urlencoded"},type:"GET",dataType:"json",contentType:"application/json",data:{},success:function(e){e.length;let t=document.getElementById("dateFrom").value,n=document.getElementById("dateTo").value,o=document.getElementById("slctEvents").value;Date.prototype.addDays=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t},""==t&&""==n&&(document.getElementById("dateFrom").valueAsDate=(new Date).addDays(-1),document.getElementById("dateTo").valueAsDate=new Date,t=document.getElementById("dateFrom").value,n=document.getElementById("dateTo").value);let a=alasql(`\n               SELECT *\n               FROM ?\n               WHERE utc >= '${t}' AND utc <='${n}' \n               ${""!==o?" AND diagcode = '"+o+"'":""}\n               GROUP BY applications, gps\n            `,[e]);$("#example").DataTable({data:a,columns:[{data:"userid"},{data:"machinename"},{data:"mac"},{data:"remoteip"},{data:"localip"},{data:"gps"},{data:"stamp"},{data:"diagcode"},{data:"key"}],columnDefs:[{targets:[8],visible:!1,searchable:!1}],order:[[6,"desc"]],rowCallback:function(e,t,n){$(e).find("td:eq(0)").css("color","red")},rowCallback:function(e,t,n){$(e).find("td:eq(6)").html(formatDate(t.stamp)),$(e).find("td:eq(7)").html(getCode(t.diagcode))},select:!0,pageLength:10,responsive:!0,dom:'<"html5buttons"B>lTfgitp',retrieve:!0,buttons:[{extend:"copy"},{extend:"csv"},{extend:"excel",title:"ExampleFile"},{extend:"pdf",title:"ExampleFile"},{extend:"print",customize:function(e){$(e.document.body).addClass("white-bg"),$(e.document.body).css("font-size","10px"),$(e.document.body).find("table").addClass("compact").css("font-size","inherit")}}]});$("#example tr").css("cursor","hand")},error:function(e,t,n){}})}function formatDate(e){let t=new Date(e),n=1==t.getMonth().toString().length?"0"+(t.getMonth()+1):t.getMonth()+1,o=1==t.getDate().toString().length?"0"+t.getDate():t.getDate(),a=1==t.getHours().toString().length?"0"+t.getHours():t.getHours(),d=1==t.getMinutes().toString().length?"0"+t.getMinutes():t.getMinutes(),c=1==t.getSeconds().toString().length?"0"+t.getSeconds():t.getSeconds();return t.getFullYear()+"-"+n+"-"+o+" "+a+":"+d+":"+c}function getCode(e){var t="";return $.each({D0001:"Screen Unlocked | Initial Login after reboot | Confidence 1:5,000,000",D0002:"Screen Unlocked | Zero Touch Unlocked authorized user |  1:5,000,000",D0003:"Screen Locked 0 | Zero Touch Locked no user present | Confidence 1:5,000,000",D0004:"Screen Locked 2 | Manual Lock Initiated by authorized user |  1:5,000,000",D0005:"Screen Locked 1| Lock without Camera | Confidence 1:5,000,000",D0006:"Screen Unlocked | Authorized user certified | Confidence 1:25,000,000",D0007:"Screen Locked 2 | Manual Lock Initiated by authorized user | Manual Process",D0008:"Screen Unlocked | Unauthorized user(s) presented |  Confidence 1:5,000,000",D0009:"Screen Locked 1 | Unauthorized user(s) presented  | Confidence 1:5,000,000",D0010:"Screen Unlocked | Authorized user(s) presented | 1:5,000,000",D0011:"Screen Unlocked | Unauthorized user(s) presented | Confidence 1:100,000",D0012:"Screen Locked 3 | Power Savings Lock Initiated | System Process",D0013:"Screen Unlocked | 8th Sensus EVE Stopped | Error",D0014:"Screen Unlocked | Video Conference in progress| Confidence 1:5,000,000",D0015:"Screen Locked 1 | Over the Shoulder unauthorized user(s) presented |  > 1"},function(n,o){e==n&&(t=o)}),t}getLogs();